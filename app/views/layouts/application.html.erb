<!DOCTYPE html>
<html>
  <head>
    <%= metamagic site: 'Papercup', title: [:site, :title], separator: " | " %>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Work Sans font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- extra Tailwind components -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.css" rel="stylesheet" />

    <!-- app styles -->
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= render "shared/script_tags" if defined?(render_script_tags) %>
  </head>

  <body class="bg-background">
    <!-- Global state controller -->
    <div data-controller="application">
      <div data-application-target="warningContainer" class="fixed top-5 right-5 z-50"></div>
      <div data-application-target="modalContainer"></div>
    </div>
    
    <%= render "shared/header" %>
    
    <main class="container mx-auto px-4 py-4">
      <%= render "shared/flash" if defined?(render_flash) %>
      <%= render "shared/impersonator" %>
      <%= yield %>
    </main>
    
    <%= render "shared/footer" %>
    
    <!-- Debug panel (hidden in production) -->
    <%= render "shared/debug_panel" %>
    
    <!-- Login modal -->
    <%= render "shared/login_modal" %>
  </body>
</html>
